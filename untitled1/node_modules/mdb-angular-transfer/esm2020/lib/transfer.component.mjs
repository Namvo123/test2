import { coerceBooleanProperty } from '@angular/cdk/coercion';
import { ChangeDetectionStrategy, Component, EventEmitter, HostBinding, Input, Output, ViewChild, } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "./transfer-container.component";
export class MdbTransferComponent {
    constructor() {
        this.class = 'transfer';
        this._dataSource = [];
        this._dataTarget = [];
        this._oneWay = false;
        this._pagination = false;
        this._elementsPerPage = 5;
        this._search = false;
        this.onChange = new EventEmitter();
        this.onSearch = new EventEmitter();
        this.onSelect = new EventEmitter();
    }
    get dataSource() {
        return this._dataSource;
    }
    set dataSource(data) {
        this._dataSource = data;
    }
    get dataTarget() {
        return this._dataTarget;
    }
    set dataTarget(data) {
        this._dataTarget = data;
    }
    get oneWay() {
        return this._oneWay;
    }
    set oneWay(isTrue) {
        this._oneWay = coerceBooleanProperty(isTrue);
    }
    get pagination() {
        return this._pagination;
    }
    set pagination(isTrue) {
        this._pagination = coerceBooleanProperty(isTrue);
    }
    get elementsPerPage() {
        return this._elementsPerPage;
    }
    set elementsPerPage(value) {
        this._elementsPerPage = value;
    }
    get search() {
        return this._search;
    }
    set search(isTrue) {
        this._search = coerceBooleanProperty(isTrue);
    }
    transferData(transferTo) {
        switch (transferTo) {
            case 'source':
                this.sendToSource();
                break;
            case 'target':
                this.sentToTarget();
                break;
            default:
                break;
        }
        this._updateTransferContainers();
    }
    sendToSource() {
        const dataToTransfer = [
            ...this.dataTarget.filter((data) => {
                return data.checked;
            }),
        ];
        this.dataSource = [...this.dataSource, ...dataToTransfer];
        this.dataTarget = [
            ...this.dataTarget.filter((data) => {
                return !data.checked;
            }),
        ];
        dataToTransfer.forEach((data) => {
            data.checked = false;
        });
    }
    sentToTarget() {
        const dataToTransfer = [
            ...this.dataSource.filter((data) => {
                return data.checked;
            }),
        ];
        this.dataTarget = [...this.dataTarget, ...dataToTransfer];
        this.dataSource = [
            ...this.dataSource.filter((data) => {
                return !data.checked;
            }),
        ];
        dataToTransfer.forEach((data) => {
            data.checked = false;
        });
    }
    _updateTransferContainers() {
        this.transferSourceContainer.updateData();
        this.transferTargetContainer.updateData();
        this.onChange.emit();
    }
}
MdbTransferComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.2.7", ngImport: i0, type: MdbTransferComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
MdbTransferComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.2.7", type: MdbTransferComponent, selector: "mdb-transfer", inputs: { dataSource: "dataSource", dataTarget: "dataTarget", oneWay: "oneWay", pagination: "pagination", elementsPerPage: "elementsPerPage", search: "search" }, outputs: { onChange: "onChange", onSearch: "onSearch", onSelect: "onSelect" }, host: { properties: { "class": "this.class" } }, viewQueries: [{ propertyName: "transferSourceContainer", first: true, predicate: ["transferSourceContainer"], descendants: true }, { propertyName: "transferTargetContainer", first: true, predicate: ["transferTargetContainer"], descendants: true }], ngImport: i0, template: "  <mdb-transfer-container \n    #transferSourceContainer\n    [dataType]=\"'source'\"\n    class=\"transfer-source-container transfer-container\"\n    [data]=\"dataSource\"\n    [pagination]=\"pagination\"\n    [elementsPerPage]=\"elementsPerPage\"\n    [search]=\"search\"\n    (onSearchOutput)=\"onSearch.emit()\"\n    (onSelect)=\"onSelect.emit()\"\n  ></mdb-transfer-container>\n  <div class=\"transfer-arrows-container transfer-container\">\n    <button \n      class=\"btn btn-primary transfer-arrows-arrow\"\n      (click)=\"transferData('source')\"\n      [attr.disabled]=\"oneWay ? 'true' : null\"\n    >\n      &lt;\n    </button>\n    <button\n      class=\"btn btn-primary transfer-arrows-arrow\"\n      (click)=\"transferData('target')\"\n    >\n      &gt;\n    </button>\n  </div>\n  <mdb-transfer-container\n    #transferTargetContainer\n    [dataType]=\"'target'\"\n    class=\"transfer-target-container transfer-container\"\n    [data]=\"dataTarget\"\n    [pagination]=\"pagination\"\n    [elementsPerPage]=\"elementsPerPage\"\n    [search]=\"search\"\n  ></mdb-transfer-container>", components: [{ type: i1.MdbTransferContainerComponent, selector: "mdb-transfer-container", inputs: ["dataType", "data", "pagination", "elementsPerPage", "search"], outputs: ["onSearchOutput", "onSelect"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.2.7", ngImport: i0, type: MdbTransferComponent, decorators: [{
            type: Component,
            args: [{ selector: 'mdb-transfer', changeDetection: ChangeDetectionStrategy.OnPush, template: "  <mdb-transfer-container \n    #transferSourceContainer\n    [dataType]=\"'source'\"\n    class=\"transfer-source-container transfer-container\"\n    [data]=\"dataSource\"\n    [pagination]=\"pagination\"\n    [elementsPerPage]=\"elementsPerPage\"\n    [search]=\"search\"\n    (onSearchOutput)=\"onSearch.emit()\"\n    (onSelect)=\"onSelect.emit()\"\n  ></mdb-transfer-container>\n  <div class=\"transfer-arrows-container transfer-container\">\n    <button \n      class=\"btn btn-primary transfer-arrows-arrow\"\n      (click)=\"transferData('source')\"\n      [attr.disabled]=\"oneWay ? 'true' : null\"\n    >\n      &lt;\n    </button>\n    <button\n      class=\"btn btn-primary transfer-arrows-arrow\"\n      (click)=\"transferData('target')\"\n    >\n      &gt;\n    </button>\n  </div>\n  <mdb-transfer-container\n    #transferTargetContainer\n    [dataType]=\"'target'\"\n    class=\"transfer-target-container transfer-container\"\n    [data]=\"dataTarget\"\n    [pagination]=\"pagination\"\n    [elementsPerPage]=\"elementsPerPage\"\n    [search]=\"search\"\n  ></mdb-transfer-container>" }]
        }], ctorParameters: function () { return []; }, propDecorators: { transferSourceContainer: [{
                type: ViewChild,
                args: ['transferSourceContainer']
            }], transferTargetContainer: [{
                type: ViewChild,
                args: ['transferTargetContainer']
            }], class: [{
                type: HostBinding,
                args: ['class']
            }], dataSource: [{
                type: Input
            }], dataTarget: [{
                type: Input
            }], oneWay: [{
                type: Input
            }], pagination: [{
                type: Input
            }], elementsPerPage: [{
                type: Input
            }], search: [{
                type: Input
            }], onChange: [{
                type: Output
            }], onSearch: [{
                type: Output
            }], onSelect: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNmZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvbWRiLWFuZ3VsYXItdHJhbnNmZXIvc3JjL2xpYi90cmFuc2Zlci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9wcm9qZWN0cy9tZGItYW5ndWxhci10cmFuc2Zlci9zcmMvbGliL3RyYW5zZmVyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBZ0IscUJBQXFCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUM1RSxPQUFPLEVBQ0wsdUJBQXVCLEVBQ3ZCLFNBQVMsRUFDVCxZQUFZLEVBQ1osV0FBVyxFQUNYLEtBQUssRUFDTCxNQUFNLEVBQ04sU0FBUyxHQUNWLE1BQU0sZUFBZSxDQUFDOzs7QUFVdkIsTUFBTSxPQUFPLG9CQUFvQjtJQWdFL0I7UUE1RHNCLFVBQUssR0FBRyxVQUFVLENBQUM7UUFTakMsZ0JBQVcsR0FBMkIsRUFBRSxDQUFDO1FBU3pDLGdCQUFXLEdBQTJCLEVBQUUsQ0FBQztRQVN6QyxZQUFPLEdBQUcsS0FBSyxDQUFDO1FBU2hCLGdCQUFXLEdBQUcsS0FBSyxDQUFDO1FBU3BCLHFCQUFnQixHQUFHLENBQUMsQ0FBQztRQVNyQixZQUFPLEdBQUcsS0FBSyxDQUFDO1FBRUwsYUFBUSxHQUF1QixJQUFJLFlBQVksRUFBRSxDQUFDO1FBQ2xELGFBQVEsR0FBdUIsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUNsRCxhQUFRLEdBQXVCLElBQUksWUFBWSxFQUFFLENBQUM7SUFFdEQsQ0FBQztJQTFEaEIsSUFDSSxVQUFVO1FBQ1osT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQzFCLENBQUM7SUFDRCxJQUFJLFVBQVUsQ0FBQyxJQUE0QjtRQUN6QyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztJQUMxQixDQUFDO0lBR0QsSUFDSSxVQUFVO1FBQ1osT0FBTyxJQUFJLENB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QixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztRQUN2QixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFTyx5QkFBeUI7UUFDL0IsSUFBSSxDQUFDLHVCQUF1QixDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQzFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUMxQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3ZCLENBQUM7O2lIQTVIVSxvQkFBb0I7cUdBQXBCLG9CQUFvQiwra0JDbkJqQyw0a0NBa0M0QjsyRkRmZixvQkFBb0I7a0JBTmhDLFNBQVM7K0JBRUUsY0FBYyxtQkFFUCx1QkFBdUIsQ0FBQyxNQUFNOzBFQUdULHVCQUF1QjtzQkFBNUQsU0FBUzt1QkFBQyx5QkFBeUI7Z0JBQ0UsdUJBQXVCO3NCQUE1RCxTQUFTO3VCQUFDLHlCQUF5QjtnQkFFZCxLQUFLO3NCQUExQixXQUFXO3VCQUFDLE9BQU87Z0JBR2hCLFVBQVU7c0JBRGIsS0FBSztnQkFVRixVQUFVO3NCQURiLEtBQUs7Z0JBVUYsTUFBTTtzQkFEVCxLQUFLO2dCQVVGLFVBQVU7c0JBRGIsS0FBSztnQkFVRixlQUFlO3NCQURsQixLQUFLO2dCQVVGLE1BQU07c0JBRFQsS0FBSztnQkFTYSxRQUFRO3NCQUExQixNQUFNO2dCQUNZLFFBQVE7c0JBQTFCLE1BQU07Z0JBQ1ksUUFBUTtzQkFBMUIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJvb2xlYW5JbnB1dCwgY29lcmNlQm9vbGVhblByb3BlcnR5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2NvZXJjaW9uJztcbmltcG9ydCB7XG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDb21wb25lbnQsXG4gIEV2ZW50RW1pdHRlcixcbiAgSG9zdEJpbmRpbmcsXG4gIElucHV0LFxuICBPdXRwdXQsXG4gIFZpZXdDaGlsZCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNZGJUcmFuc2ZlckNvbnRhaW5lckNvbXBvbmVudCB9IGZyb20gJy4vdHJhbnNmZXItY29udGFpbmVyLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBNZGJUcmFuc2ZlckRhdGEgfSBmcm9tICcuL3RyYW5zZmVyLmludGVyZmFjZSc7XG5cbkBDb21wb25lbnQoe1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQGFuZ3VsYXItZXNsaW50L2NvbXBvbmVudC1zZWxlY3RvclxuICBzZWxlY3RvcjogJ21kYi10cmFuc2ZlcicsXG4gIHRlbXBsYXRlVXJsOiAndHJhbnNmZXIuY29tcG9uZW50Lmh0bWwnLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbn0pXG5leHBvcnQgY2xhc3MgTWRiVHJhbnNmZXJDb21wb25lbnQge1xuICBAVmlld0NoaWxkKCd0cmFuc2ZlclNvdXJjZUNvbnRhaW5lcicpIHRyYW5zZmVyU291cmNlQ29udGFpbmVyOiBNZGJUcmFuc2ZlckNvbnRhaW5lckNvbXBvbmVudDtcbiAgQFZpZXdDaGlsZCgndHJhbnNmZXJUYXJnZXRDb250YWluZXInKSB0cmFuc2ZlclRhcmdldENvbnRhaW5lcjogTWRiVHJhbnNmZXJDb250YWluZXJDb21wb25lbnQ7XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcycpIGNsYXNzID0gJ3RyYW5zZmVyJztcblxuICBASW5wdXQoKVxuICBnZXQgZGF0YVNvdXJjZSgpOiBBcnJheTxNZGJUcmFuc2ZlckRhdGE+IHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YVNvdXJjZTtcbiAgfVxuICBzZXQgZGF0YVNvdXJjZShkYXRhOiBBcnJheTxNZGJUcmFuc2ZlckRhdGE+KSB7XG4gICAgdGhpcy5fZGF0YVNvdXJjZSA9IGRhdGE7XG4gIH1cbiAgcHJpdmF0ZSBfZGF0YVNvdXJjZTogQXJyYXk8TWRiVHJhbnNmZXJEYXRhPiA9IFtdO1xuXG4gIEBJbnB1dCgpXG4gIGdldCBkYXRhVGFyZ2V0KCk6IEFycmF5PE1kYlRyYW5zZmVyRGF0YT4ge1xuICAgIHJldHVybiB0aGlzLl9kYXRhVGFyZ2V0O1xuICB9XG4gIHNldCBkYXRhVGFyZ2V0KGRhdGE6IEFycmF5PE1kYlRyYW5zZmVyRGF0YT4pIHtcbiAgICB0aGlzLl9kYXRhVGFyZ2V0ID0gZGF0YTtcbiAgfVxuICBwcml2YXRlIF9kYXRhVGFyZ2V0OiBBcnJheTxNZGJUcmFuc2ZlckRhdGE+ID0gW107XG5cbiAgQElucHV0KClcbiAgZ2V0IG9uZVdheSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fb25lV2F5O1xuICB9XG4gIHNldCBvbmVXYXkoaXNUcnVlOiBCb29sZWFuSW5wdXQpIHtcbiAgICB0aGlzLl9vbmVXYXkgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkoaXNUcnVlKTtcbiAgfVxuICBwcml2YXRlIF9vbmVXYXkgPSBmYWxzZTtcblxuICBASW5wdXQoKVxuICBnZXQgcGFnaW5hdGlvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fcGFnaW5hdGlvbjtcbiAgfVxuICBzZXQgcGFnaW5hdGlvbihpc1RydWU6IEJvb2xlYW5JbnB1dCkge1xuICAgIHRoaXMuX3BhZ2luYXRpb24gPSBjb2VyY2VCb29sZWFuUHJvcGVydHkoaXNUcnVlKTtcbiAgfVxuICBwcml2YXRlIF9wYWdpbmF0aW9uID0gZmFsc2U7XG5cbiAgQElucHV0KClcbiAgZ2V0IGVsZW1lbnRzUGVyUGFnZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50c1BlclBhZ2U7XG4gIH1cbiAgc2V0IGVsZW1lbnRzUGVyUGFnZSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fZWxlbWVudHNQZXJQYWdlID0gdmFsdWU7XG4gIH1cbiAgcHJpdmF0ZSBfZWxlbWVudHNQZXJQYWdlID0gNTtcblxuICBASW5wdXQoKVxuICBnZXQgc2VhcmNoKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9zZWFyY2g7XG4gIH1cbiAgc2V0IHNlYXJjaChpc1RydWU6IEJvb2xlYW5JbnB1dCkge1xuICAgIHRoaXMuX3NlYXJjaCA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eShpc1RydWUpO1xuICB9XG4gIHByaXZhdGUgX3NlYXJjaCA9IGZhbHNlO1xuXG4gIEBPdXRwdXQoKSByZWFkb25seSBvbkNoYW5nZTogRXZlbnRFbWl0dGVyPHZvaWQ+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KCkgcmVhZG9ubHkgb25TZWFyY2g6IEV2ZW50RW1pdHRlcjx2b2lkPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIHJlYWRvbmx5IG9uU2VsZWN0OiBFdmVudEVtaXR0ZXI8dm9pZD4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgY29uc3RydWN0b3IoKSB7fVxuXG4gIHRyYW5zZmVyRGF0YSh0cmFuc2ZlclRvOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBzd2l0Y2ggKHRyYW5zZmVyVG8pIHtcbiAgICAgIGNhc2UgJ3NvdXJjZSc6XG4gICAgICAgIHRoaXMuc2VuZFRvU291cmNlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndGFyZ2V0JzpcbiAgICAgICAgdGhpcy5zZW50VG9UYXJnZXQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgdGhpcy5fdXBkYXRlVHJhbnNmZXJDb250YWluZXJzKCk7XG4gIH1cblxuICBzZW5kVG9Tb3VyY2UoKTogdm9pZCB7XG4gICAgY29uc3QgZGF0YVRvVHJhbnNmZXIgPSBbXG4gICAgICAuLi50aGlzLmRhdGFUYXJnZXQuZmlsdGVyKChkYXRhKSA9PiB7XG4gICAgICAgIHJldHVybiBkYXRhLmNoZWNrZWQ7XG4gICAgICB9KSxcbiAgICBdO1xuXG4gICAgdGhpcy5kYXRhU291cmNlID0gWy4uLnRoaXMuZGF0YVNvdXJjZSwgLi4uZGF0YVRvVHJhbnNmZXJdO1xuXG4gICAgdGhpcy5kYXRhVGFyZ2V0ID0gW1xuICAgICAgLi4udGhpcy5kYXRhVGFyZ2V0LmZpbHRlcigoZGF0YSkgPT4ge1xuICAgICAgICByZXR1cm4gIWRhdGEuY2hlY2tlZDtcbiAgICAgIH0pLFxuICAgIF07XG5cbiAgICBkYXRhVG9UcmFuc2Zlci5mb3JFYWNoKChkYXRhKSA9PiB7XG4gICAgICBkYXRhLmNoZWNrZWQgPSBmYWxzZTtcbiAgICB9KTtcbiAgfVxuXG4gIHNlbnRUb1RhcmdldCgpOiB2b2lkIHtcbiAgICBjb25zdCBkYXRhVG9UcmFuc2ZlciA9IFtcbiAgICAgIC4uLnRoaXMuZGF0YVNvdXJjZS5maWx0ZXIoKGRhdGEpID0+IHtcbiAgICAgICAgcmV0dXJuIGRhdGEuY2hlY2tlZDtcbiAgICAgIH0pLFxuICAgIF07XG5cbiAgICB0aGlzLmRhdGFUYXJnZXQgPSBbLi4udGhpcy5kYXRhVGFyZ2V0LCAuLi5kYXRhVG9UcmFuc2Zlcl07XG5cbiAgICB0aGlzLmRhdGFTb3VyY2UgPSBbXG4gICAgICAuLi50aGlzLmRhdGFTb3VyY2UuZmlsdGVyKChkYXRhKSA9PiB7XG4gICAgICAgIHJldHVybiAhZGF0YS5jaGVja2VkO1xuICAgICAgfSksXG4gICAgXTtcblxuICAgIGRhdGFUb1RyYW5zZmVyLmZvckVhY2goKGRhdGEpID0+IHtcbiAgICAgIGRhdGEuY2hlY2tlZCA9IGZhbHNlO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlVHJhbnNmZXJDb250YWluZXJzKCk6IHZvaWQge1xuICAgIHRoaXMudHJhbnNmZXJTb3VyY2VDb250YWluZXIudXBkYXRlRGF0YSgpO1xuICAgIHRoaXMudHJhbnNmZXJUYXJnZXRDb250YWluZXIudXBkYXRlRGF0YSgpO1xuICAgIHRoaXMub25DaGFuZ2UuZW1pdCgpO1xuICB9XG59XG4iLCIgIDxtZGItdHJhbnNmZXItY29udGFpbmVyIFxuICAgICN0cmFuc2ZlclNvdXJjZUNvbnRhaW5lclxuICAgIFtkYXRhVHlwZV09XCInc291cmNlJ1wiXG4gICAgY2xhc3M9XCJ0cmFuc2Zlci1zb3VyY2UtY29udGFpbmVyIHRyYW5zZmVyLWNvbnRhaW5lclwiXG4gICAgW2RhdGFdPVwiZGF0YVNvdXJjZVwiXG4gICAgW3BhZ2luYXRpb25dPVwicGFnaW5hdGlvblwiXG4gICAgW2VsZW1lbnRzUGVyUGFnZV09XCJlbGVtZW50c1BlclBhZ2VcIlxuICAgIFtzZWFyY2hdPVwic2VhcmNoXCJcbiAgICAob25TZWFyY2hPdXRwdXQpPVwib25TZWFyY2guZW1pdCgpXCJcbiAgICAob25TZWxlY3QpPVwib25TZWxlY3QuZW1pdCgpXCJcbiAgPjwvbWRiLXRyYW5zZmVyLWNvbnRhaW5lcj5cbiAgPGRpdiBjbGFzcz1cInRyYW5zZmVyLWFycm93cy1jb250YWluZXIgdHJhbnNmZXItY29udGFpbmVyXCI+XG4gICAgPGJ1dHRvbiBcbiAgICAgIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IHRyYW5zZmVyLWFycm93cy1hcnJvd1wiXG4gICAgICAoY2xpY2spPVwidHJhbnNmZXJEYXRhKCdzb3VyY2UnKVwiXG4gICAgICBbYXR0ci5kaXNhYmxlZF09XCJvbmVXYXkgPyAndHJ1ZScgOiBudWxsXCJcbiAgICA+XG4gICAgICAmbHQ7XG4gICAgPC9idXR0b24+XG4gICAgPGJ1dHRvblxuICAgICAgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgdHJhbnNmZXItYXJyb3dzLWFycm93XCJcbiAgICAgIChjbGljayk9XCJ0cmFuc2ZlckRhdGEoJ3RhcmdldCcpXCJcbiAgICA+XG4gICAgICAmZ3Q7XG4gICAgPC9idXR0b24+XG4gIDwvZGl2PlxuICA8bWRiLXRyYW5zZmVyLWNvbnRhaW5lclxuICAgICN0cmFuc2ZlclRhcmdldENvbnRhaW5lclxuICAgIFtkYXRhVHlwZV09XCIndGFyZ2V0J1wiXG4gICAgY2xhc3M9XCJ0cmFuc2Zlci10YXJnZXQtY29udGFpbmVyIHRyYW5zZmVyLWNvbnRhaW5lclwiXG4gICAgW2RhdGFdPVwiZGF0YVRhcmdldFwiXG4gICAgW3BhZ2luYXRpb25dPVwicGFnaW5hdGlvblwiXG4gICAgW2VsZW1lbnRzUGVyUGFnZV09XCJlbGVtZW50c1BlclBhZ2VcIlxuICAgIFtzZWFyY2hdPVwic2VhcmNoXCJcbiAgPjwvbWRiLXRyYW5zZmVyLWNvbnRhaW5lcj4iXX0=