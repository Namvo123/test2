import { ChangeDetectionStrategy, Component, EventEmitter, HostBinding, Input, Output, ViewChild, } from '@angular/core';
import { fromEvent, Subject } from 'rxjs';
import { takeUntil } from 'rxjs/operators';
import { mimeTypes } from './file-upload-mimetype-data';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
var UnitSize;
(function (UnitSize) {
    UnitSize[UnitSize["G"] = 1000000000] = "G";
    UnitSize[UnitSize["M"] = 1000000] = "M";
    UnitSize[UnitSize["K"] = 1000] = "K";
    UnitSize[UnitSize["B"] = 1] = "B";
})(UnitSize || (UnitSize = {}));
export class MdbFileUploadComponent {
    constructor(_cdRef) {
        this._cdRef = _cdRef;
        this.wrapper = true;
        this.maxFileSize = Infinity;
        this.defaultPreview = null;
        this.height = null;
        this.disabled = false;
        this.acceptedExtensions = null;
        this.multiple = false;
        this.defaultMsg = 'Drag and drop a file here or click';
        this.mainError = 'Ooops, something wrong happened.';
        this.maxSizeError = 'Your file is too big (Max size ~~~)';
        this.formatError = 'Your file has incorrect file format (correct format(s) ~~~)';
        this.quantityError = 'Too many files (allowed quantity of files ~~~)';
        this.previewMsg = 'Drag and drop or click to replace';
        this.removeBtn = 'Remove';
        this.removeBtnDisabled = false;
        this.maxFileQuantity = Infinity;
        this.uploadError = new EventEmitter();
        this.fileAdded = new EventEmitter();
        this.fileRemoved = new EventEmitter();
        this._errors = [];
        this._files = [];
        this._previews = [];
        this._defaultPreview = null;
        this._showMainError = false;
        this._imageFileExtensions = ['png', 'jpg', 'jpeg', 'bmp', 'gif'];
        this._destroy$ = new Subject();
    }
    reset() {
        this.input.nativeElement.value = '';
        this._files = [];
        this._previews = [];
        this._errors = [];
        this._defaultPreview = null;
        this._cdRef.markForCheck();
    }
    ngOnInit() {
        if (this.defaultPreview) {
            this._setupDefaultPreview();
        }
        if (this.multiple) {
            this._setupDragEvents();
        }
    }
    ngOnDestroy() {
        this._destroy$.next();
        this._destroy$.complete();
    }
    _setupDefaultPreview() {
        const previewParameters = this.defaultPreview.split('/');
        const name = previewParameters[previewParameters.length - 1];
        const extension = name.split('.')[1];
        const isImage = this._imageFileExtensions.includes(extension);
        const imageSrc = isImage && this.defaultPreview;
        this._defaultPreview = { name, isImage, extension, imageSrc };
    }
    _setupDragEvents() {
        fromEvent(this.previews.nativeElement, 'drop')
            .pipe(takeUntil(this._destroy$))
            .subscribe((event) => {
            event.preventDefault();
            const files = event.dataTransfer ? event.dataTransfer.files : [];
            if (files.length) {
                this._handleFileUpload(files);
            }
        });
        fromEvent(this.previews.nativeElement, 'dragover')
            .pipe(takeUntil(this._destroy$))
            .subscribe((event) => {
            event.preventDefault();
        });
    }
    _handleChangeEvent(event) {
        const files = event.target.files;
        if (!files.length) {
            return;
        }
        this._handleFileUpload(files);
    }
    _handleFileUpload(files) {
        this._errors = [];
        this._validateFiles(files);
        if (this._errors.length) {
            this.uploadError.emit(this._errors);
            return;
        }
        const canUploadMoreFiles = this.maxFileQuantity > this._files.length;
        if (this.multiple && !canUploadMoreFiles) {
            return;
        }
        if (this.multiple) {
            this._handleMultipleFileUpload(files);
        }
        else {
            this._previews = [];
            this._handleSingleFileUpload(files[0]);
        }
    }
    _validateFiles(files) {
        Array.from(files).forEach((file) => {
            this._checkFileSize(file);
            this._checkAcceptedExtensions(file);
        });
    }
    _checkFileSize(file) {
        const fileSizeMb = file.size / UnitSize.M;
        if (fileSizeMb > this.maxFileSize) {
            const type = 'maxSizeError';
            const message = this.maxSizeError.replace('~~~', `${this.maxFileSize}M`);
            this._errors.push({ type, message });
        }
    }
    _checkAcceptedExtensions(file) {
        if (!this.acceptedExtensions) {
            return;
        }
        const extensionsForMapping = [
            '.abw',
            '.arc',
            '.avi',
            '.azw',
            '.bin',
            '.bz',
            '.bz2',
            '.cda',
            '.csh',
            '.doc',
            '.docx',
            '.eot',
            '.epub',
            '.gz',
            '.htm',
            '.ico',
            '.ics',
            '.jar',
            '.js',
            '.json',
            '.jsonld',
            '.midi',
            '.mjs',
            '.mp3',
            '.mp4',
            '.mpeg',
            '.mpkg',
            '.odp',
            '.ods',
            '.odt',
            '.oga',
            '.ogv',
            '.ogx',
            '.opus',
            '.otf',
            '.php',
            '.ppt',
            '.pptx',
            '.rar',
            '.sh',
            '.svg',
            '.swf',
            '.tar',
            '.txt',
            '.vsd',
            '.weba',
            '.xhtml',
            '.xls',
            '.xul',
            '.x3gp',
            '.7z',
        ];
        const acceptedExtensions = this.acceptedExtensions.split(',');
        if (acceptedExtensions.length) {
            const fileMainType = file.type.split('/')[0];
            let fileSecondType = file.type.split('/')[1];
            let isAcceptedFormat = false;
            acceptedExtensions.forEach((format) => {
                const isMappingNeeded = extensionsForMapping.indexOf(format) > -1;
                if (isMappingNeeded) {
                    fileSecondType = mimeTypes.find((mimeType) => mimeType['ext'] === format)['ext'];
                }
                if (format.includes('/*') && format.includes(fileMainType)) {
                    isAcceptedFormat = true;
                }
                else if (format.includes('/') &&
                    format.includes(fileMainType) &&
                    format.includes(fileSecondType)) {
                    isAcceptedFormat = true;
                }
                else if (format.includes(fileSecondType)) {
                    isAcceptedFormat = true;
                }
            });
            if (!isAcceptedFormat) {
                const type = 'formatError';
                const message = this.formatError.replace('~~~', this.acceptedExtensions.split(',').join(' '));
                this._errors.push({ type, message });
            }
        }
    }
    _handleSingleFileUpload(file) {
        this._createPreview(file);
        this._files.push(file);
        this.fileAdded.emit([file]);
    }
    _handleMultipleFileUpload(files) {
        Array.from(files).forEach((file) => this._createPreview(file));
        this._files = [...this._files, ...files];
        this.fileAdded.emit([...files]);
        this.input.nativeElement.value = '';
    }
    _createPreview(file) {
        const name = file.name;
        const types = file.type.split('/');
        const isImage = types[0] === 'image';
        const extension = types[1];
        let imageSrc;
        if (isImage) {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onloadend = () => {
                imageSrc = reader.result;
                this._previews.push({ file, name, isImage, imageSrc, extension });
                this._cdRef.markForCheck();
            };
        }
        else {
            this._previews.push({ file, name, isImage, extension });
        }
        this._cdRef.markForCheck();
    }
    _removeFile(preview) {
        const previewIndex = this._previews.indexOf(preview);
        const fileIndex = this._files.indexOf(preview.file);
        this._previews.splice(previewIndex, 1);
        this._files.splice(fileIndex, 1);
        this.input.nativeElement.value = '';
        this.fileRemoved.emit(preview.file);
    }
    _removeDefaultPreview() {
        this._defaultPreview = null;
    }
    _handlePreviewsClick() {
        if (this.multiple && this._previews.length) {
            this.input.nativeElement.click();
        }
    }
}
MdbFileUploadComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.2.7", ngImport: i0, type: MdbFileUploadComponent, deps: [{ token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
MdbFileUploadComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.2.7", type: MdbFileUploadComponent, selector: "mdb-file-upload", inputs: { maxFileSize: "maxFileSize", defaultPreview: "defaultPreview", height: "height", disabled: "disabled", acceptedExtensions: "acceptedExtensions", multiple: "multiple", defaultMsg: "defaultMsg", mainError: "mainError", maxSizeError: "maxSizeError", formatError: "formatError", quantityError: "quantityError", previewMsg: "previewMsg", removeBtn: "removeBtn", removeBtnDisabled: "removeBtnDisabled", maxFileQuantity: "maxFileQuantity" }, outputs: { uploadError: "uploadError", fileAdded: "fileAdded", fileRemoved: "fileRemoved" }, host: { properties: { "class.file-upload-wrapper": "this.wrapper" } }, viewQueries: [{ propertyName: "input", first: true, predicate: ["input"], descendants: true, static: true }, { propertyName: "previews", first: true, predicate: ["previews"], descendants: true, static: true }], ngImport: i0, template: "<div\n  class=\"file-upload\"\n  [ngClass]=\"{ disabled: disabled, 'has-preview': _previews.length || _defaultPreview, 'has-error': _errors.length }\"\n  [style.height.px]=\"height ? height : null\"\n>\n  <div class=\"file-upload-message\">\n    <i class=\"fas fa-cloud-upload-alt file-upload-cloud-icon\"></i>\n    <p class=\"file-upload-default-message\">{{ defaultMsg }}</p>\n    <p class=\"file-upload-main-error\" *ngIf=\"_errors.length\">{{ mainError }}</p>\n  </div>\n  <div class=\"file-upload-mask\"></div>\n  <ul class=\"file-upload-errors\" *ngFor=\"let error of _errors\">\n    <li class=\"file-upload-error\">{{ error.message }}</li>\n  </ul>\n  <input\n    #input\n    type=\"file\"\n    class=\"file-upload-input\"\n    [ngClass]=\"{ 'has-multiple': multiple }\"\n    [attr.disabled]=\"disabled ? disabled : null\"\n    [attr.multiple]=\"multiple ? multiple : null\"\n    [attr.accept]=\"acceptedExtensions ? acceptedExtensions : null\"\n    (change)=\"_handleChangeEvent($event)\"\n  />\n  <div #previews class=\"file-upload-previews\" (click)=\"_handlePreviewsClick()\">\n    <ng-container *ngIf=\"!_errors.length\">\n      <div class=\"file-upload-preview\" *ngFor=\"let preview of _previews\">\n        <span class=\"file-upload-render\">\n          <img *ngIf=\"preview.isImage\" class=\"file-upload-preview-img\" [src]=\"preview.imageSrc\" />\n          <ng-container *ngIf=\"!preview.isImage\">\n            <i *ngIf=\"!preview.isImage\" class=\"fas fa-file file-upload-file-icon\"></i>\n            <span class=\"file-upload-extension\">{{ preview.extension }}</span>\n          </ng-container>\n        </span>\n        <div class=\"file-upload-preview-details\">\n          <button *ngIf=\"!removeBtnDisabled\" type=\"button\" class=\"btn btn-danger file-upload-remove-file-btn\" (click)=\"_removeFile(preview); $event.stopPropagation()\">\n            {{ removeBtn }}\n            <i class=\"fa fa-trash-alt ms-1\"></i>\n          </button>\n          <div class=\"file-upload-details-container\">\n            <div class=\"file-upload-preview-details-inner\">\n              <p class=\"file-upload-file-name\">{{ preview.name }}</p>\n              <p class=\"file-upload-preview-message\">{{ previewMsg }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </ng-container>\n\n    <div *ngIf=\"_defaultPreview && !_files.length\" class=\"file-upload-preview\">\n      <span class=\"file-upload-render\">\n        <img class=\"file-upload-preview-img\" [src]=\"_defaultPreview.imageSrc\" />\n      </span>\n      <div class=\"file-upload-preview-details\">\n        <button *ngIf=\"!removeBtnDisabled\" type=\"button\" class=\"btn btn-danger file-upload-remove-file-btn\" (click)=\"_removeDefaultPreview(); $event.stopPropagation()\">\n          {{ removeBtn }}\n          <i class=\"fa fa-trash-alt ms-1\"></i>\n        </button>\n        <div class=\"file-upload-details-container\">\n          <div class=\"file-upload-preview-details-inner\">\n            <p class=\"file-upload-file-name\">{{ _defaultPreview.name }}</p>\n            <p class=\"file-upload-preview-message\">{{ previewMsg }}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n", directives: [{ type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.2.7", ngImport: i0, type: MdbFileUploadComponent, decorators: [{
            type: Component,
            args: [{ selector: 'mdb-file-upload', changeDetection: ChangeDetectionStrategy.OnPush, template: "<div\n  class=\"file-upload\"\n  [ngClass]=\"{ disabled: disabled, 'has-preview': _previews.length || _defaultPreview, 'has-error': _errors.length }\"\n  [style.height.px]=\"height ? height : null\"\n>\n  <div class=\"file-upload-message\">\n    <i class=\"fas fa-cloud-upload-alt file-upload-cloud-icon\"></i>\n    <p class=\"file-upload-default-message\">{{ defaultMsg }}</p>\n    <p class=\"file-upload-main-error\" *ngIf=\"_errors.length\">{{ mainError }}</p>\n  </div>\n  <div class=\"file-upload-mask\"></div>\n  <ul class=\"file-upload-errors\" *ngFor=\"let error of _errors\">\n    <li class=\"file-upload-error\">{{ error.message }}</li>\n  </ul>\n  <input\n    #input\n    type=\"file\"\n    class=\"file-upload-input\"\n    [ngClass]=\"{ 'has-multiple': multiple }\"\n    [attr.disabled]=\"disabled ? disabled : null\"\n    [attr.multiple]=\"multiple ? multiple : null\"\n    [attr.accept]=\"acceptedExtensions ? acceptedExtensions : null\"\n    (change)=\"_handleChangeEvent($event)\"\n  />\n  <div #previews class=\"file-upload-previews\" (click)=\"_handlePreviewsClick()\">\n    <ng-container *ngIf=\"!_errors.length\">\n      <div class=\"file-upload-preview\" *ngFor=\"let preview of _previews\">\n        <span class=\"file-upload-render\">\n          <img *ngIf=\"preview.isImage\" class=\"file-upload-preview-img\" [src]=\"preview.imageSrc\" />\n          <ng-container *ngIf=\"!preview.isImage\">\n            <i *ngIf=\"!preview.isImage\" class=\"fas fa-file file-upload-file-icon\"></i>\n            <span class=\"file-upload-extension\">{{ preview.extension }}</span>\n          </ng-container>\n        </span>\n        <div class=\"file-upload-preview-details\">\n          <button *ngIf=\"!removeBtnDisabled\" type=\"button\" class=\"btn btn-danger file-upload-remove-file-btn\" (click)=\"_removeFile(preview); $event.stopPropagation()\">\n            {{ removeBtn }}\n            <i class=\"fa fa-trash-alt ms-1\"></i>\n          </button>\n          <div class=\"file-upload-details-container\">\n            <div class=\"file-upload-preview-details-inner\">\n              <p class=\"file-upload-file-name\">{{ preview.name }}</p>\n              <p class=\"file-upload-preview-message\">{{ previewMsg }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </ng-container>\n\n    <div *ngIf=\"_defaultPreview && !_files.length\" class=\"file-upload-preview\">\n      <span class=\"file-upload-render\">\n        <img class=\"file-upload-preview-img\" [src]=\"_defaultPreview.imageSrc\" />\n      </span>\n      <div class=\"file-upload-preview-details\">\n        <button *ngIf=\"!removeBtnDisabled\" type=\"button\" class=\"btn btn-danger file-upload-remove-file-btn\" (click)=\"_removeDefaultPreview(); $event.stopPropagation()\">\n          {{ removeBtn }}\n          <i class=\"fa fa-trash-alt ms-1\"></i>\n        </button>\n        <div class=\"file-upload-details-container\">\n          <div class=\"file-upload-preview-details-inner\">\n            <p class=\"file-upload-file-name\">{{ _defaultPreview.name }}</p>\n            <p class=\"file-upload-preview-message\">{{ previewMsg }}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }]; }, propDecorators: { input: [{
                type: ViewChild,
                args: ['input', { static: true }]
            }], previews: [{
                type: ViewChild,
                args: ['previews', { static: true }]
            }], wrapper: [{
                type: HostBinding,
                args: ['class.file-upload-wrapper']
            }], maxFileSize: [{
                type: Input
            }], defaultPreview: [{
                type: Input
            }], height: [{
                type: Input
            }], disabled: [{
                type: Input
            }], acceptedExtensions: [{
                type: Input
            }], multiple: [{
                type: Input
            }], defaultMsg: [{
                type: Input
            }], mainError: [{
                type: Input
            }], maxSizeError: [{
                type: Input
            }], formatError: [{
                type: Input
            }], quantityError: [{
                type: Input
            }], previewMsg: [{
                type: Input
            }], removeBtn: [{
                type: Input
            }], removeBtnDisabled: [{
                type: Input
            }], maxFileQuantity: [{
                type: Input
            }], uploadError: [{
                type: Output
            }], fileAdded: [{
                type: Output
            }], fileRemoved: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZS11cGxvYWQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvbWRiLWFuZ3VsYXItZmlsZS11cGxvYWQvc3JjL2xpYi9maWxlLXVwbG9hZC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9wcm9qZWN0cy9tZGItYW5ndWxhci1maWxlLXVwbG9hZC9zcmMvbGliL2ZpbGUtdXBsb2FkLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCx1QkFBdUIsRUFFdkIsU0FBUyxFQUVULFlBQVksRUFDWixXQUFXLEVBQ1gsS0FBSyxFQUdMLE1BQU0sRUFDTixTQUFTLEdBQ1YsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDMUMsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzNDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQzs7O0FBRXhELElBQUssUUFLSjtBQUxELFdBQUssUUFBUTtJQUNYLDBDQUFjLENBQUE7SUFDZCx1Q0FBVyxDQUFBO0lBQ1gsb0NBQVEsQ0FBQTtJQUNSLGlDQUFLLENBQUE7QUFDUCxDQUFDLEVBTEksUUFBUSxLQUFSLFFBQVEsUUFLWjtBQTRCRCxNQUFNLE9BQU8sc0JBQXNCO0lBZ0RqQyxZQUFvQixNQUF5QjtRQUF6QixXQUFNLEdBQU4sTUFBTSxDQUFtQjtRQTVDSCxZQUFPLEdBQUcsSUFBSSxDQUFDO1FBRWhELGdCQUFXLEdBQVcsUUFBUSxDQUFDO1FBQy9CLG1CQUFjLEdBQWtCLElBQUksQ0FBQztRQUNyQyxXQUFNLEdBQWtCLElBQUksQ0FBQztRQUM3QixhQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ2pCLHVCQUFrQixHQUFrQixJQUFJLENBQUM7UUFDekMsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUNqQixlQUFV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QW9FQTsyRkRsQmEsc0JBQXNCO2tCQU5sQyxTQUFTOytCQUVFLGlCQUFpQixtQkFFVix1QkFBdUIsQ0FBQyxNQUFNO3dHQUdULEtBQUs7c0JBQTFDLFNBQVM7dUJBQUMsT0FBTyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtnQkFDSyxRQUFRO3NCQUFoRCxTQUFTO3VCQUFDLFVBQVUsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7Z0JBRUcsT0FBTztzQkFBaEQsV0FBVzt1QkFBQywyQkFBMkI7Z0JBRS9CLFdBQVc7c0JBQW5CLEtBQUs7Z0JBQ0csY0FBYztzQkFBdEIsS0FBSztnQkFDRyxNQUFNO3NCQUFkLEtBQUs7Z0JBQ0csUUFBUTtzQkFBaEIsS0FBSztnQkFDRyxrQkFBa0I7c0JBQTFCLEtBQUs7Z0JBQ0csUUFBUTtzQkFBaEIsS0FBSztnQkFDRyxVQUFVO3NCQUFsQixLQUFLO2dCQUNHLFNBQVM7c0JBQWpCLEtBQUs7Z0JBQ0csWUFBWTtzQkFBcEIsS0FBSztnQkFDRyxXQUFXO3NCQUFuQixLQUFLO2dCQUNHLGFBQWE7c0JBQXJCLEtBQUs7Z0JBQ0csVUFBVTtzQkFBbEIsS0FBSztnQkFDRyxTQUFTO3NCQUFqQixLQUFLO2dCQUNHLGlCQUFpQjtzQkFBekIsS0FBSztnQkFDRyxlQUFlO3NCQUF2QixLQUFLO2dCQUVJLFdBQVc7c0JBQXBCLE1BQU07Z0JBR0csU0FBUztzQkFBbEIsTUFBTTtnQkFDRyxXQUFXO3NCQUFwQixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgSG9zdEJpbmRpbmcsXG4gIElucHV0LFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgT3V0cHV0LFxuICBWaWV3Q2hpbGQsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgZnJvbUV2ZW50LCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBtaW1lVHlwZXMgfSBmcm9tICcuL2ZpbGUtdXBsb2FkLW1pbWV0eXBlLWRhdGEnO1xuXG5lbnVtIFVuaXRTaXplIHtcbiAgRyA9IDEwMDAwMDAwMDAsXG4gIE0gPSAxMDAwMDAwLFxuICBLID0gMTAwMCxcbiAgQiA9IDEsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWRiRmlsZVVwbG9hZEVycm9yIHtcbiAgdHlwZTogc3RyaW5nO1xuICBtZXNzYWdlOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBGaWxlUHJldmlldyB7XG4gIGZpbGU6IEZpbGU7XG4gIG5hbWU6IHN0cmluZztcbiAgZXh0ZW5zaW9uOiBzdHJpbmc7XG4gIGlzSW1hZ2U6IGJvb2xlYW47XG4gIGltYWdlU3JjPzogc3RyaW5nIHwgQXJyYXlCdWZmZXI7XG59XG5cbmludGVyZmFjZSBEZWZhdWx0UHJldmlldyB7XG4gIG5hbWU6IHN0cmluZztcbiAgZXh0ZW5zaW9uOiBzdHJpbmc7XG4gIGlzSW1hZ2U6IGJvb2xlYW47XG4gIGltYWdlU3JjPzogc3RyaW5nO1xufVxuXG5AQ29tcG9uZW50KHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBhbmd1bGFyLWVzbGludC9jb21wb25lbnQtc2VsZWN0b3JcbiAgc2VsZWN0b3I6ICdtZGItZmlsZS11cGxvYWQnLFxuICB0ZW1wbGF0ZVVybDogJy4vZmlsZS11cGxvYWQuY29tcG9uZW50Lmh0bWwnLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbn0pXG5leHBvcnQgY2xhc3MgTWRiRmlsZVVwbG9hZENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcbiAgQFZpZXdDaGlsZCgnaW5wdXQnLCB7IHN0YXRpYzogdHJ1ZSB9KSBpbnB1dDogRWxlbWVudFJlZjxIVE1MSW5wdXRFbGVtZW50PjtcbiAgQFZpZXdDaGlsZCgncHJldmlld3MnLCB7IHN0YXRpYzogdHJ1ZSB9KSBwcmV2aWV3czogRWxlbWVudFJlZjxIVE1MRWxlbWVudD47XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5maWxlLXVwbG9hZC13cmFwcGVyJykgd3JhcHBlciA9IHRydWU7XG5cbiAgQElucHV0KCkgbWF4RmlsZVNpemU6IG51bWJlciA9IEluZmluaXR5O1xuICBASW5wdXQoKSBkZWZhdWx0UHJldmlldzogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIEBJbnB1dCgpIGhlaWdodDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIEBJbnB1dCgpIGRpc2FibGVkID0gZmFsc2U7XG4gIEBJbnB1dCgpIGFjY2VwdGVkRXh0ZW5zaW9uczogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIEBJbnB1dCgpIG11bHRpcGxlID0gZmFsc2U7XG4gIEBJbnB1dCgpIGRlZmF1bHRNc2cgPSAnRHJhZyBhbmQgZHJvcCBhIGZpbGUgaGVyZSBvciBjbGljayc7XG4gIEBJbnB1dCgpIG1haW5FcnJvciA9ICdPb29wcywgc29tZXRoaW5nIHdyb25nIGhhcHBlbmVkLic7XG4gIEBJbnB1dCgpIG1heFNpemVFcnJvciA9ICdZb3VyIGZpbGUgaXMgdG9vIGJpZyAoTWF4IHNpemUgfn5+KSc7XG4gIEBJbnB1dCgpIGZvcm1hdEVycm9yID0gJ1lvdXIgZmlsZSBoYXMgaW5jb3JyZWN0IGZpbGUgZm9ybWF0IChjb3JyZWN0IGZvcm1hdChzKSB+fn4pJztcbiAgQElucHV0KCkgcXVhbnRpdHlFcnJvciA9ICdUb28gbWFueSBmaWxlcyAoYWxsb3dlZCBxdWFudGl0eSBvZiBmaWxlcyB+fn4pJztcbiAgQElucHV0KCkgcHJldmlld01zZyA9ICdEcmFnIGFuZCBkcm9wIG9yIGNsaWNrIHRvIHJlcGxhY2UnO1xuICBASW5wdXQoKSByZW1vdmVCdG4gPSAnUmVtb3ZlJztcbiAgQElucHV0KCkgcmVtb3ZlQnRuRGlzYWJsZWQgPSBmYWxzZTtcbiAgQElucHV0KCkgbWF4RmlsZVF1YW50aXR5OiBudW1iZXIgPSBJbmZpbml0eTtcblxuICBAT3V0cHV0KCkgdXBsb2FkRXJyb3I6IEV2ZW50RW1pdHRlcjxNZGJGaWxlVXBsb2FkRXJyb3JbXT4gPSBuZXcgRXZlbnRFbWl0dGVyPFxuICAgIE1kYkZpbGVVcGxvYWRFcnJvcltdXG4gID4oKTtcbiAgQE91dHB1dCgpIGZpbGVBZGRlZDogRXZlbnRFbWl0dGVyPEZpbGVbXT4gPSBuZXcgRXZlbnRFbWl0dGVyPEZpbGVbXT4oKTtcbiAgQE91dHB1dCgpIGZpbGVSZW1vdmVkOiBFdmVudEVtaXR0ZXI8RmlsZT4gPSBuZXcgRXZlbnRFbWl0dGVyPEZpbGU+KCk7XG5cbiAgX2Vycm9yczogTWRiRmlsZVVwbG9hZEVycm9yW10gPSBbXTtcbiAgX2ZpbGVzOiBGaWxlW10gPSBbXTtcbiAgX3ByZXZpZXdzOiBGaWxlUHJldmlld1tdID0gW107XG4gIF9kZWZhdWx0UHJldmlldzogRGVmYXVsdFByZXZpZXcgfCBudWxsID0gbnVsbDtcblxuICByZXNldCgpIHtcbiAgICB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQudmFsdWUgPSAnJztcbiAgICB0aGlzLl9maWxlcyA9IFtdO1xuICAgIHRoaXMuX3ByZXZpZXdzID0gW107XG4gICAgdGhpcy5fZXJyb3JzID0gW107XG4gICAgdGhpcy5fZGVmYXVsdFByZXZpZXcgPSBudWxsO1xuICAgIHRoaXMuX2NkUmVmLm1hcmtGb3JDaGVjaygpO1xuICB9XG5cbiAgX3Nob3dNYWluRXJyb3IgPSBmYWxzZTtcblxuICBwcml2YXRlIF9pbWFnZUZpbGVFeHRlbnNpb25zOiBzdHJpbmdbXSA9IFsncG5nJywgJ2pwZycsICdqcGVnJywgJ2JtcCcsICdnaWYnXTtcblxuICBwcml2YXRlIF9kZXN0cm95JCA9IG5ldyBTdWJqZWN0PHZvaWQ+KCk7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfY2RSZWY6IENoYW5nZURldGVjdG9yUmVmKSB7fVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmRlZmF1bHRQcmV2aWV3KSB7XG4gICAgICB0aGlzLl9zZXR1cERlZmF1bHRQcmV2aWV3KCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcbiAgICAgIHRoaXMuX3NldHVwRHJhZ0V2ZW50cygpO1xuICAgIH1cbiAgfVxuXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMuX2Rlc3Ryb3kkLm5leHQoKTtcbiAgICB0aGlzLl9kZXN0cm95JC5jb21wbGV0ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2V0dXBEZWZhdWx0UHJldmlldygpIHtcbiAgICBjb25zdCBwcmV2aWV3UGFyYW1ldGVycyA9IHRoaXMuZGVmYXVsdFByZXZpZXcuc3BsaXQoJy8nKTtcbiAgICBjb25zdCBuYW1lID0gcHJldmlld1BhcmFtZXRlcnNbcHJldmlld1BhcmFtZXRlcnMubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgZXh0ZW5zaW9uID0gbmFtZS5zcGxpdCgnLicpWzFdO1xuICAgIGNvbnN0IGlzSW1hZ2UgPSB0aGlzLl9pbWFnZUZpbGVFeHRlbnNpb25zLmluY2x1ZGVzKGV4dGVuc2lvbik7XG4gICAgY29uc3QgaW1hZ2VTcmMgPSBpc0ltYWdlICYmIHRoaXMuZGVmYXVsdFByZXZpZXc7XG5cbiAgICB0aGlzLl9kZWZhdWx0UHJldmlldyA9IHsgbmFtZSwgaXNJbWFnZSwgZXh0ZW5zaW9uLCBpbWFnZVNyYyB9O1xuICB9XG5cbiAgcHJpdmF0ZSBfc2V0dXBEcmFnRXZlbnRzKCkge1xuICAgIGZyb21FdmVudCh0aGlzLnByZXZpZXdzLm5hdGl2ZUVsZW1lbnQsICdkcm9wJylcbiAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLl9kZXN0cm95JCkpXG4gICAgICAuc3Vic2NyaWJlKChldmVudDogYW55KSA9PiB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gZXZlbnQuZGF0YVRyYW5zZmVyID8gZXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzIDogW107XG5cbiAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuX2hhbmRsZUZpbGVVcGxvYWQoZmlsZXMpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIGZyb21FdmVudCh0aGlzLnByZXZpZXdzLm5hdGl2ZUVsZW1lbnQsICdkcmFnb3ZlcicpXG4gICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5fZGVzdHJveSQpKVxuICAgICAgLnN1YnNjcmliZSgoZXZlbnQ6IGFueSkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSk7XG4gIH1cblxuICBfaGFuZGxlQ2hhbmdlRXZlbnQoZXZlbnQ6IGFueSkge1xuICAgIGNvbnN0IGZpbGVzID0gZXZlbnQudGFyZ2V0LmZpbGVzO1xuXG4gICAgaWYgKCFmaWxlcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9oYW5kbGVGaWxlVXBsb2FkKGZpbGVzKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZUZpbGVVcGxvYWQoZmlsZXM6IEZpbGVbXSkge1xuICAgIHRoaXMuX2Vycm9ycyA9IFtdO1xuXG4gICAgdGhpcy5fdmFsaWRhdGVGaWxlcyhmaWxlcyk7XG5cbiAgICBpZiAodGhpcy5fZXJyb3JzLmxlbmd0aCkge1xuICAgICAgdGhpcy51cGxvYWRFcnJvci5lbWl0KHRoaXMuX2Vycm9ycyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY2FuVXBsb2FkTW9yZUZpbGVzID0gdGhpcy5tYXhGaWxlUXVhbnRpdHkgPiB0aGlzLl9maWxlcy5sZW5ndGg7XG5cbiAgICBpZiAodGhpcy5tdWx0aXBsZSAmJiAhY2FuVXBsb2FkTW9yZUZpbGVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcbiAgICAgIHRoaXMuX2hhbmRsZU11bHRpcGxlRmlsZVVwbG9hZChmaWxlcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3ByZXZpZXdzID0gW107XG4gICAgICB0aGlzLl9oYW5kbGVTaW5nbGVGaWxlVXBsb2FkKGZpbGVzWzBdKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF92YWxpZGF0ZUZpbGVzKGZpbGVzOiBGaWxlW10pIHtcbiAgICBBcnJheS5mcm9tKGZpbGVzKS5mb3JFYWNoKChmaWxlKSA9PiB7XG4gICAgICB0aGlzLl9jaGVja0ZpbGVTaXplKGZpbGUpO1xuICAgICAgdGhpcy5fY2hlY2tBY2NlcHRlZEV4dGVuc2lvbnMoZmlsZSk7XG4gICAgfSk7XG4gIH1cblxuICBfY2hlY2tGaWxlU2l6ZShmaWxlOiBGaWxlKSB7XG4gICAgY29uc3QgZmlsZVNpemVNYiA9IGZpbGUuc2l6ZSAvIFVuaXRTaXplLk07XG5cbiAgICBpZiAoZmlsZVNpemVNYiA+IHRoaXMubWF4RmlsZVNpemUpIHtcbiAgICAgIGNvbnN0IHR5cGUgPSAnbWF4U2l6ZUVycm9yJztcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLm1heFNpemVFcnJvci5yZXBsYWNlKCd+fn4nLCBgJHt0aGlzLm1heEZpbGVTaXplfU1gKTtcblxuICAgICAgdGhpcy5fZXJyb3JzLnB1c2goeyB0eXBlLCBtZXNzYWdlIH0pO1xuICAgIH1cbiAgfVxuXG4gIF9jaGVja0FjY2VwdGVkRXh0ZW5zaW9ucyhmaWxlOiBGaWxlKSB7XG4gICAgaWYgKCF0aGlzLmFjY2VwdGVkRXh0ZW5zaW9ucykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBleHRlbnNpb25zRm9yTWFwcGluZyA9IFtcbiAgICAgICcuYWJ3JyxcbiAgICAgICcuYXJjJyxcbiAgICAgICcuYXZpJyxcbiAgICAgICcuYXp3JyxcbiAgICAgICcuYmluJyxcbiAgICAgICcuYnonLFxuICAgICAgJy5iejInLFxuICAgICAgJy5jZGEnLFxuICAgICAgJy5jc2gnLFxuICAgICAgJy5kb2MnLFxuICAgICAgJy5kb2N4JyxcbiAgICAgICcuZW90JyxcbiAgICAgICcuZXB1YicsXG4gICAgICAnLmd6JyxcbiAgICAgICcuaHRtJyxcbiAgICAgICcuaWNvJyxcbiAgICAgICcuaWNzJyxcbiAgICAgICcuamFyJyxcbiAgICAgICcuanMnLFxuICAgICAgJy5qc29uJyxcbiAgICAgICcuanNvbmxkJyxcbiAgICAgICcubWlkaScsXG4gICAgICAnLm1qcycsXG4gICAgICAnLm1wMycsXG4gICAgICAnLm1wNCcsXG4gICAgICAnLm1wZWcnLFxuICAgICAgJy5tcGtnJyxcbiAgICAgICcub2RwJyxcbiAgICAgICcub2RzJyxcbiAgICAgICcub2R0JyxcbiAgICAgICcub2dhJyxcbiAgICAgICcub2d2JyxcbiAgICAgICcub2d4JyxcbiAgICAgICcub3B1cycsXG4gICAgICAnLm90ZicsXG4gICAgICAnLnBocCcsXG4gICAgICAnLnBwdCcsXG4gICAgICAnLnBwdHgnLFxuICAgICAgJy5yYXInLFxuICAgICAgJy5zaCcsXG4gICAgICAnLnN2ZycsXG4gICAgICAnLnN3ZicsXG4gICAgICAnLnRhcicsXG4gICAgICAnLnR4dCcsXG4gICAgICAnLnZzZCcsXG4gICAgICAnLndlYmEnLFxuICAgICAgJy54aHRtbCcsXG4gICAgICAnLnhscycsXG4gICAgICAnLnh1bCcsXG4gICAgICAnLngzZ3AnLFxuICAgICAgJy43eicsXG4gICAgXTtcblxuICAgIGNvbnN0IGFjY2VwdGVkRXh0ZW5zaW9ucyA9IHRoaXMuYWNjZXB0ZWRFeHRlbnNpb25zLnNwbGl0KCcsJyk7XG5cbiAgICBpZiAoYWNjZXB0ZWRFeHRlbnNpb25zLmxlbmd0aCkge1xuICAgICAgY29uc3QgZmlsZU1haW5UeXBlID0gZmlsZS50eXBlLnNwbGl0KCcvJylbMF07XG4gICAgICBsZXQgZmlsZVNlY29uZFR5cGUgPSBmaWxlLnR5cGUuc3BsaXQoJy8nKVsxXTtcblxuICAgICAgbGV0IGlzQWNjZXB0ZWRGb3JtYXQgPSBmYWxzZTtcblxuICAgICAgYWNjZXB0ZWRFeHRlbnNpb25zLmZvckVhY2goKGZvcm1hdDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzTWFwcGluZ05lZWRlZCA9IGV4dGVuc2lvbnNGb3JNYXBwaW5nLmluZGV4T2YoZm9ybWF0KSA+IC0xO1xuICAgICAgICBpZiAoaXNNYXBwaW5nTmVlZGVkKSB7XG4gICAgICAgICAgZmlsZVNlY29uZFR5cGUgPSBtaW1lVHlwZXMuZmluZCgobWltZVR5cGUpID0+IG1pbWVUeXBlWydleHQnXSA9PT0gZm9ybWF0KVsnZXh0J107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvcm1hdC5pbmNsdWRlcygnLyonKSAmJiBmb3JtYXQuaW5jbHVkZXMoZmlsZU1haW5UeXBlKSkge1xuICAgICAgICAgIGlzQWNjZXB0ZWRGb3JtYXQgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIGZvcm1hdC5pbmNsdWRlcygnLycpICYmXG4gICAgICAgICAgZm9ybWF0LmluY2x1ZGVzKGZpbGVNYWluVHlwZSkgJiZcbiAgICAgICAgICBmb3JtYXQuaW5jbHVkZXMoZmlsZVNlY29uZFR5cGUpXG4gICAgICAgICkge1xuICAgICAgICAgIGlzQWNjZXB0ZWRGb3JtYXQgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKGZvcm1hdC5pbmNsdWRlcyhmaWxlU2Vjb25kVHlwZSkpIHtcbiAgICAgICAgICBpc0FjY2VwdGVkRm9ybWF0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghaXNBY2NlcHRlZEZvcm1hdCkge1xuICAgICAgICBjb25zdCB0eXBlID0gJ2Zvcm1hdEVycm9yJztcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuZm9ybWF0RXJyb3IucmVwbGFjZShcbiAgICAgICAgICAnfn5+JyxcbiAgICAgICAgICB0aGlzLmFjY2VwdGVkRXh0ZW5zaW9ucy5zcGxpdCgnLCcpLmpvaW4oJyAnKVxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuX2Vycm9ycy5wdXNoKHsgdHlwZSwgbWVzc2FnZSB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVTaW5nbGVGaWxlVXBsb2FkKGZpbGU6IEZpbGUpIHtcbiAgICB0aGlzLl9jcmVhdGVQcmV2aWV3KGZpbGUpO1xuICAgIHRoaXMuX2ZpbGVzLnB1c2goZmlsZSk7XG4gICAgdGhpcy5maWxlQWRkZWQuZW1pdChbZmlsZV0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlTXVsdGlwbGVGaWxlVXBsb2FkKGZpbGVzOiBGaWxlW10pIHtcbiAgICBBcnJheS5mcm9tKGZpbGVzKS5mb3JFYWNoKChmaWxlKSA9PiB0aGlzLl9jcmVhdGVQcmV2aWV3KGZpbGUpKTtcblxuICAgIHRoaXMuX2ZpbGVzID0gWy4uLnRoaXMuX2ZpbGVzLCAuLi5maWxlc107XG4gICAgdGhpcy5maWxlQWRkZWQuZW1pdChbLi4uZmlsZXNdKTtcbiAgICB0aGlzLmlucHV0Lm5hdGl2ZUVsZW1lbnQudmFsdWUgPSAnJztcbiAgfVxuXG4gIHByaXZhdGUgX2NyZWF0ZVByZXZpZXcoZmlsZTogRmlsZSkge1xuICAgIGNvbnN0IG5hbWUgPSBmaWxlLm5hbWU7XG4gICAgY29uc3QgdHlwZXMgPSBmaWxlLnR5cGUuc3BsaXQoJy8nKTtcbiAgICBjb25zdCBpc0ltYWdlID0gdHlwZXNbMF0gPT09ICdpbWFnZSc7XG4gICAgY29uc3QgZXh0ZW5zaW9uID0gdHlwZXNbMV07XG5cbiAgICBsZXQgaW1hZ2VTcmM6IHN0cmluZyB8IEFycmF5QnVmZmVyO1xuXG4gICAgaWYgKGlzSW1hZ2UpIHtcbiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSAoKSA9PiB7XG4gICAgICAgIGltYWdlU3JjID0gcmVhZGVyLnJlc3VsdDtcbiAgICAgICAgdGhpcy5fcHJldmlld3MucHVzaCh7IGZpbGUsIG5hbWUsIGlzSW1hZ2UsIGltYWdlU3JjLCBleHRlbnNpb24gfSk7XG4gICAgICAgIHRoaXMuX2NkUmVmLm1hcmtGb3JDaGVjaygpO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcHJldmlld3MucHVzaCh7IGZpbGUsIG5hbWUsIGlzSW1hZ2UsIGV4dGVuc2lvbiB9KTtcbiAgICB9XG5cbiAgICB0aGlzLl9jZFJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgfVxuXG4gIF9yZW1vdmVGaWxlKHByZXZpZXc6IEZpbGVQcmV2aWV3KSB7XG4gICAgY29uc3QgcHJldmlld0luZGV4ID0gdGhpcy5fcHJldmlld3MuaW5kZXhPZihwcmV2aWV3KTtcbiAgICBjb25zdCBmaWxlSW5kZXggPSB0aGlzLl9maWxlcy5pbmRleE9mKHByZXZpZXcuZmlsZSk7XG4gICAgdGhpcy5fcHJldmlld3Muc3BsaWNlKHByZXZpZXdJbmRleCwgMSk7XG4gICAgdGhpcy5fZmlsZXMuc3BsaWNlKGZpbGVJbmRleCwgMSk7XG4gICAgdGhpcy5pbnB1dC5uYXRpdmVFbGVtZW50LnZhbHVlID0gJyc7XG5cbiAgICB0aGlzLmZpbGVSZW1vdmVkLmVtaXQocHJldmlldy5maWxlKTtcbiAgfVxuXG4gIF9yZW1vdmVEZWZhdWx0UHJldmlldygpIHtcbiAgICB0aGlzLl9kZWZhdWx0UHJldmlldyA9IG51bGw7XG4gIH1cblxuICBfaGFuZGxlUHJldmlld3NDbGljaygpIHtcbiAgICBpZiAodGhpcy5tdWx0aXBsZSAmJiB0aGlzLl9wcmV2aWV3cy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudC5jbGljaygpO1xuICAgIH1cbiAgfVxufVxuIiwiPGRpdlxuICBjbGFzcz1cImZpbGUtdXBsb2FkXCJcbiAgW25nQ2xhc3NdPVwieyBkaXNhYmxlZDogZGlzYWJsZWQsICdoYXMtcHJldmlldyc6IF9wcmV2aWV3cy5sZW5ndGggfHwgX2RlZmF1bHRQcmV2aWV3LCAnaGFzLWVycm9yJzogX2Vycm9ycy5sZW5ndGggfVwiXG4gIFtzdHlsZS5oZWlnaHQucHhdPVwiaGVpZ2h0ID8gaGVpZ2h0IDogbnVsbFwiXG4+XG4gIDxkaXYgY2xhc3M9XCJmaWxlLXVwbG9hZC1tZXNzYWdlXCI+XG4gICAgPGkgY2xhc3M9XCJmYXMgZmEtY2xvdWQtdXBsb2FkLWFsdCBmaWxlLXVwbG9hZC1jbG91ZC1pY29uXCI+PC9pPlxuICAgIDxwIGNsYXNzPVwiZmlsZS11cGxvYWQtZGVmYXVsdC1tZXNzYWdlXCI+e3sgZGVmYXVsdE1zZyB9fTwvcD5cbiAgICA8cCBjbGFzcz1cImZpbGUtdXBsb2FkLW1haW4tZXJyb3JcIiAqbmdJZj1cIl9lcnJvcnMubGVuZ3RoXCI+e3sgbWFpbkVycm9yIH19PC9wPlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz1cImZpbGUtdXBsb2FkLW1hc2tcIj48L2Rpdj5cbiAgPHVsIGNsYXNzPVwiZmlsZS11cGxvYWQtZXJyb3JzXCIgKm5nRm9yPVwibGV0IGVycm9yIG9mIF9lcnJvcnNcIj5cbiAgICA8bGkgY2xhc3M9XCJmaWxlLXVwbG9hZC1lcnJvclwiPnt7IGVycm9yLm1lc3NhZ2UgfX08L2xpPlxuICA8L3VsPlxuICA8aW5wdXRcbiAgICAjaW5wdXRcbiAgICB0eXBlPVwiZmlsZVwiXG4gICAgY2xhc3M9XCJmaWxlLXVwbG9hZC1pbnB1dFwiXG4gICAgW25nQ2xhc3NdPVwieyAnaGFzLW11bHRpcGxlJzogbXVsdGlwbGUgfVwiXG4gICAgW2F0dHIuZGlzYWJsZWRdPVwiZGlzYWJsZWQgPyBkaXNhYmxlZCA6IG51bGxcIlxuICAgIFthdHRyLm11bHRpcGxlXT1cIm11bHRpcGxlID8gbXVsdGlwbGUgOiBudWxsXCJcbiAgICBbYXR0ci5hY2NlcHRdPVwiYWNjZXB0ZWRFeHRlbnNpb25zID8gYWNjZXB0ZWRFeHRlbnNpb25zIDogbnVsbFwiXG4gICAgKGNoYW5nZSk9XCJfaGFuZGxlQ2hhbmdlRXZlbnQoJGV2ZW50KVwiXG4gIC8+XG4gIDxkaXYgI3ByZXZpZXdzIGNsYXNzPVwiZmlsZS11cGxvYWQtcHJldmlld3NcIiAoY2xpY2spPVwiX2hhbmRsZVByZXZpZXdzQ2xpY2soKVwiPlxuICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhX2Vycm9ycy5sZW5ndGhcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJmaWxlLXVwbG9hZC1wcmV2aWV3XCIgKm5nRm9yPVwibGV0IHByZXZpZXcgb2YgX3ByZXZpZXdzXCI+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS11cGxvYWQtcmVuZGVyXCI+XG4gICAgICAgICAgPGltZyAqbmdJZj1cInByZXZpZXcuaXNJbWFnZVwiIGNsYXNzPVwiZmlsZS11cGxvYWQtcHJldmlldy1pbWdcIiBbc3JjXT1cInByZXZpZXcuaW1hZ2VTcmNcIiAvPlxuICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhcHJldmlldy5pc0ltYWdlXCI+XG4gICAgICAgICAgICA8aSAqbmdJZj1cIiFwcmV2aWV3LmlzSW1hZ2VcIiBjbGFzcz1cImZhcyBmYS1maWxlIGZpbGUtdXBsb2FkLWZpbGUtaWNvblwiPjwvaT5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS11cGxvYWQtZXh0ZW5zaW9uXCI+e3sgcHJldmlldy5leHRlbnNpb24gfX08L3NwYW4+XG4gICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImZpbGUtdXBsb2FkLXByZXZpZXctZGV0YWlsc1wiPlxuICAgICAgICAgIDxidXR0b24gKm5nSWY9XCIhcmVtb3ZlQnRuRGlzYWJsZWRcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRhbmdlciBmaWxlLXVwbG9hZC1yZW1vdmUtZmlsZS1idG5cIiAoY2xpY2spPVwiX3JlbW92ZUZpbGUocHJldmlldyk7ICRldmVudC5zdG9wUHJvcGFnYXRpb24oKVwiPlxuICAgICAgICAgICAge3sgcmVtb3ZlQnRuIH19XG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXRyYXNoLWFsdCBtcy0xXCI+PC9pPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmaWxlLXVwbG9hZC1kZXRhaWxzLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZpbGUtdXBsb2FkLXByZXZpZXctZGV0YWlscy1pbm5lclwiPlxuICAgICAgICAgICAgICA8cCBjbGFzcz1cImZpbGUtdXBsb2FkLWZpbGUtbmFtZVwiPnt7IHByZXZpZXcubmFtZSB9fTwvcD5cbiAgICAgICAgICAgICAgPHAgY2xhc3M9XCJmaWxlLXVwbG9hZC1wcmV2aWV3LW1lc3NhZ2VcIj57eyBwcmV2aWV3TXNnIH19PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9uZy1jb250YWluZXI+XG5cbiAgICA8ZGl2ICpuZ0lmPVwiX2RlZmF1bHRQcmV2aWV3ICYmICFfZmlsZXMubGVuZ3RoXCIgY2xhc3M9XCJmaWxlLXVwbG9hZC1wcmV2aWV3XCI+XG4gICAgICA8c3BhbiBjbGFzcz1cImZpbGUtdXBsb2FkLXJlbmRlclwiPlxuICAgICAgICA8aW1nIGNsYXNzPVwiZmlsZS11cGxvYWQtcHJldmlldy1pbWdcIiBbc3JjXT1cIl9kZWZhdWx0UHJldmlldy5pbWFnZVNyY1wiIC8+XG4gICAgICA8L3NwYW4+XG4gICAgICA8ZGl2IGNsYXNzPVwiZmlsZS11cGxvYWQtcHJldmlldy1kZXRhaWxzXCI+XG4gICAgICAgIDxidXR0b24gKm5nSWY9XCIhcmVtb3ZlQnRuRGlzYWJsZWRcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRhbmdlciBmaWxlLXVwbG9hZC1yZW1vdmUtZmlsZS1idG5cIiAoY2xpY2spPVwiX3JlbW92ZURlZmF1bHRQcmV2aWV3KCk7ICRldmVudC5zdG9wUHJvcGFnYXRpb24oKVwiPlxuICAgICAgICAgIHt7IHJlbW92ZUJ0biB9fVxuICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtdHJhc2gtYWx0IG1zLTFcIj48L2k+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmlsZS11cGxvYWQtZGV0YWlscy1jb250YWluZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmlsZS11cGxvYWQtcHJldmlldy1kZXRhaWxzLWlubmVyXCI+XG4gICAgICAgICAgICA8cCBjbGFzcz1cImZpbGUtdXBsb2FkLWZpbGUtbmFtZVwiPnt7IF9kZWZhdWx0UHJldmlldy5uYW1lIH19PC9wPlxuICAgICAgICAgICAgPHAgY2xhc3M9XCJmaWxlLXVwbG9hZC1wcmV2aWV3LW1lc3NhZ2VcIj57eyBwcmV2aWV3TXNnIH19PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuIl19